"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.titleCase = titleCase;
function titleCase(s, extraFixedCaseWords) {
    const noCaps = {
        and: true,
        but: true,
        or: true,
        nor: true,
        for: true,
        yet: true,
        so: true,
        to: true,
        as: true,
        at: true,
        by: true,
        from: true,
        in: true,
        into: true,
        of: true,
        off: true,
        on: true,
        onto: true,
        out: true,
        over: true,
        up: true,
        with: true,
    };
    const articles = {
        a: true,
        an: true,
        the: true,
    };
    const fixedCaseWords = {
        ai: "AI",
        "built-in": "Built-in",
        css: "CSS",
        "crates.io": "crates.io",
        dbt: "dbt",
        dns: "DNS",
        flomo: "flomo",
        github: "GitHub",
        html: "HTML",
        ide: "IDE",
        id: "ID",
        ios: "iOS",
        ip: "IP",
        iphone: "iPhone",
        iterm: "iTerm",
        json: "JSON",
        kubectx: "kubectx",
        macos: "macOS",
        mcp: "MCP",
        "monday.com": "monday.com",
        npm: "npm",
        "plug-in": "Plug-in",
        pr: "PR",
        "pub.dev": "pub.dev",
        "ray.so": "ray.so",
        servicenow: "ServiceNow",
        qr: "QR",
        ssh: "SSH",
        svg: "SVG",
        totp: "TOTP",
        url: "URL",
        vlc: "VLC",
        vpn: "VPN",
        vs: "VS",
        vscode: "VS Code",
        xkcd: "xkcd",
    };
    const allFixedCaseWords = Object.assign(Object.assign({}, Object.fromEntries((extraFixedCaseWords || []).map((word) => [word.toLowerCase(), word]))), fixedCaseWords);
    const words = s.split(" ").map((x) => x.toString());
    for (let i = 0; i < words.length; i++) {
        let word = words[i];
        let leadingNonLetter = "";
        let trailingNonLetter = "";
        const leadingMatch = word.match(/^[^a-zA-Z]+/);
        if (leadingMatch) {
            leadingNonLetter = leadingMatch[0];
            word = word.slice(leadingNonLetter.length);
        }
        const trailingMatch = word.match(/[^a-zA-Z]+$/);
        if (trailingMatch) {
            trailingNonLetter = trailingMatch[0];
            word = word.slice(0, word.length - trailingNonLetter.length);
        }
        const lowerWord = word.toLowerCase();
        const ok = noCaps[lowerWord];
        const isArticle = articles[lowerWord];
        const fixedCase = allFixedCaseWords[lowerWord];
        if (fixedCase) {
            words[i] = fixedCase;
        }
        else if (word.startsWith("http://") || word.startsWith("https://")) {
            words[i] = word;
        }
        else if ((!ok && !isArticle) ||
            i === 0 ||
            (isArticle && words[i - 1].endsWith(":"))) {
            words[i] = word
                .split("-")
                .map((w) => w.charAt(0).toUpperCase() + w.slice(1))
                .join("-");
        }
        else {
            words[i] = word.toLowerCase();
        }
        words[i] = leadingNonLetter + words[i] + trailingNonLetter;
    }
    return words.join(" ");
}
